.stage[data-phase="draw"] { --phase-accent: #67c7d9; }
.stage[data-phase="play"] { --phase-accent: #79e6bf; }
.stage[data-phase="end"]  { --phase-accent: #e5c269; }

/* ——— Board: mocniejsza głębia i vignette na krawędziach ——— */
.board{
  filter: saturate(1.05);
}
.wood{
  box-shadow:
    inset 0 6px 0 rgba(255,255,255,.35),
    inset 0 -8px 0 rgba(0,0,0,.18),
    0 18px 40px rgba(90,55,28,.18);
}
.cloth{
  box-shadow:
    inset 0 10px 28px rgba(0,0,0,.08),
    inset 0 -24px 36px rgba(0,0,0,.06);
}
.parchment{
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.75),
    inset 0 -24px 36px rgba(93,57,24,.12),
    0 14px 28px rgba(0,0,0,.06);
}
/* delikatna siateczka na pergaminie (bardziej „planszowo”) */
.parchment::after{
  content:""; position:absolute; inset:4% 3%;
  background:
    linear-gradient(90deg, rgba(0,0,0,.03) 1px, transparent 1px) 0 0/20px 20px,
    linear-gradient(0deg,  rgba(0,0,0,.02) 1px, transparent 1px) 0 0/20px 20px;
  opacity:.35; pointer-events:none; border-radius: 18px;
}

/* ——— HUD: lepszy kontrast i hover ——— */
.chip{
  box-shadow: 0 10px 22px rgba(0,0,0,.12), inset 0 2px 0 rgba(255,255,255,.7);
  transition: filter .15s ease, transform .08s ease;
}
.chip:hover{ filter: brightness(1.04); transform: translateY(-1px) }
.phase{
  text-transform: uppercase;
  letter-spacing:.6px;
  box-shadow: 0 10px 22px rgba(0,0,0,.12), inset 0 2px 0 rgba(255,255,255,.8);
}

/* ——— Side panels: wyraźniejsza separacja ——— */
.panel{
  background: linear-gradient(180deg, #ffffff, #f7fbff);
  box-shadow: 0 12px 26px rgba(0,0,0,.12), inset 0 2px 0 rgba(255,255,255,.7);
}
.stat{ background:#fff }
.goal{ border-style: solid; }

/* ——— Life track: grubszy tor, fazowy kolor progresu ——— */
.life-track::before{
  height: 12px;
  background: linear-gradient(180deg, #ecf6ff, #dfeaf4);
}
.life-track::after{
  height: 12px;
  background:
    linear-gradient(180deg, color-mix(in oklab, var(--phase-accent) 70%, #ffffff), var(--phase-accent));
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--phase-accent) 50%, #0000),
    0 10px 18px color-mix(in oklab, var(--phase-accent) 25%, #0000);
}

/* Węzły — większe, z „aurą” dla complete i active */
.life-track .node{ width:68px; height:68px; }
.life-track .node[data-complete="true"]{
  box-shadow:
    0 6px 18px rgba(0,0,0,.12),
    0 0 0 6px rgba(121,230,191,.20),
    inset 0 2px 0 rgba(255,255,255,.85);
}
.life-track .node[data-active="true"]{
  transform: scale(1.08);
  border-color: var(--phase-accent);
  box-shadow:
    0 10px 24px rgba(0,0,0,.16),
    0 0 0 8px color-mix(in oklab, var(--phase-accent) 35%, #0000),
    inset 0 2px 0 rgba(255,255,255,.9);
}
/* aktywny węzeł — pierścień pulsujący */
.life-track .node[data-active="true"]::before{
  content:""; position:absolute; inset:-6px; border-radius:50%;
  border:3px solid color-mix(in oklab, var(--phase-accent) 60%, #ffffff);
  animation: m12-pulse 1.4s ease-out infinite;
}
@keyframes m12-pulse{
  0%{ transform: scale(.9); opacity:.6 }
  70%{ transform: scale(1.2); opacity:0 }
  100%{ transform: scale(1.25); opacity:0 }
}

/* Pionek — bardziej „coin”, ze smugą światła */
.pawn{
  width: 76px; height: 76px; border:2px solid color-mix(in oklab, var(--phase-accent) 60%, #2dd4bf);
  background:
    radial-gradient(40% 40% at 30% 30%, #fff, #e9fff5 55%, #ccf6e8),
    radial-gradient(130% 100% at 50% 120%, color-mix(in oklab, var(--phase-accent) 28%, #ffffff), transparent 70%);
  box-shadow:
    0 12px 26px rgba(0,0,0,.22),
    0 0 0 8px color-mix(in oklab, var(--phase-accent) 22%, #0000);
  animation: pawn-bob 3.6s ease-in-out infinite;
}
.pawn::before{
  /* smuga „shine sweep” */
  content:""; position:absolute; inset:-30% -10% 40% -10%;
  background: linear-gradient(90deg, rgba(255,255,255,.0), rgba(255,255,255,.55), rgba(255,255,255,0));
  transform: rotate(18deg); filter: blur(6px); opacity:.25;
  animation: m12-sweep 2.8s linear infinite;
}
@keyframes m12-sweep{
  0%{ transform: translateX(-80%) rotate(18deg) }
  100%{ transform: translateX(80%) rotate(18deg) }
}

/* ——— Crystals: ostrzejsze fasety + lekki „blink” na pełnych ——— */
.crystal{
  background:
    linear-gradient(180deg, #eafaff, #bfe8ff),
    linear-gradient(135deg, rgba(255,255,255,.9), rgba(255,255,255,0) 60%);
  border-color:#8fbfe2;
}
.time[data-time] .crystal:nth-of-type(-n+6){
  transition: filter .2s ease, opacity .2s ease;
}
.time[data-time] .crystal:nth-of-type(-n+6).full,
.time[data-time="1"]  .crystal:nth-of-type(1),
.time[data-time="2"]  .crystal:nth-of-type(-n+2),
.time[data-time="3"]  .crystal:nth-of-type(-n+3),
.time[data-time="4"]  .crystal:nth-of-type(-n+4),
.time[data-time="5"]  .crystal:nth-of-type(-n+5),
.time[data-time="6"]  .crystal:nth-of-type(-n+6){
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.12));
}

/* ——— CTA „Zakończ rok”: wyraźniejszy stan hover/pressed ——— */
.end-turn{
  box-shadow: 0 8px 0 #6ac090, 0 16px 26px rgba(0,0,0,.16);
  transition: transform .06s ease, box-shadow .06s ease, filter .15s ease;
}
.end-turn:hover{ filter: brightness(1.05) }
.end-turn:active{ transform: translateY(2px); box-shadow: 0 5px 0 #6ac090, 0 10px 18px rgba(0,0,0,.16) }

/* ——— Overlays: bardziej „pergaminowe” ranty ——— */
.overlay__dialog{
  background:
    radial-gradient(120% 100% at 50% 0%, rgba(255,255,255,.6), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, var(--parch-1), var(--parch-2));
  box-shadow:
    0 28px 64px rgba(0,0,0,.28),
    0 0 0 1px rgba(255,255,255,.25) inset,
    0 -18px 28px rgba(93,57,24,.10) inset;
}

/* ——— Ozdoby: minimalny boost i delikatna przycinka na mniejszych oknach ——— */
.orn--right .shard{ filter: saturate(1.05) }
@media (max-height: 720px){
  .orn--bottom{ opacity:.8 }
}
